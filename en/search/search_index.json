{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome","text":"<p>AI \u200b\u200bSolution Kit provides a series of machine learning functions based on deep learning, such as text recognition, natural language understanding, face detection, and image understanding. You can easily use out-of-the-box AI features by calling APIs, while seamlessly integrating with other services provided by AWS.</p>"},{"location":"#apis","title":"APIs","text":"<p>The solution automatically creates RESTful APIs through Amazon API Gateway. After deploying the solution, you can send HTTP POST requests to use the AI features.</p> <p>The table below lists the supported APIs. You can click the Details link to view the test method and sample code of each API interface. For more information, see API Reference Guide.</p>"},{"location":"#optical-character-recognition-ocr","title":"Optical Character Recognition (OCR)","text":"API Name Description API Lite OCR (Simplified Chinese) Recognize and extract Simplified Chinese, numbers, alphabetical characters and symbols. Return the information such as text or coordinates. Details Lite OCR (Traditional Chinese) Recognize and extract Traditional Chinese, numbers, alphabetical characters and symbols from images. Return the information such as text or coordinates. Details Advanced OCR (Multilingual) Recognize and extract Simplified/Traditional Chinese, Vietnamese, Japanese, Korean, English, numbers, alphabetical characters and symbols. Return the information such as text or coordinates. Details Document Layout Analysis Convert document images to a Markdown/JSON format output, with table format in Markdown/HTML. Details Custom OCR You can customize the OCR template, extract the structured text information in cards and tickets, and display the results in the key-value format. Details Car License Plate Recognize text on Chinese car license plate. Details"},{"location":"#face-and-body","title":"Face and Body","text":"API Name Description API Face Detection Detect the face in an image, and map the detected facial features and contour key point information to 64 vector coordinates. Details Face Comparison Compare two faces of the same person and return a confidence score of the similarity. Details Human Attribute Recognition Recognize the attributes of the human body in the image, and return the human body position coordinates and attribute analysis in each area, including the semantic information of 16 attributes such as gender, age, and clothing. Details Human Image Segmentation Segment human bodies from background and return the alpha channel which is a color component representing the degree of transparency of a color. Details"},{"location":"#image-understanding","title":"Image Understanding","text":"API Name Description API Image Similarity Compare two images by calculating the cosine distance from the image feature vector and converting it into confidence, and return similarity score. Details Object Recognition Recognize objects in the image and return the region information and confidence score for each object. 300 types of objects are supported. Details Pornography Detection Detect pornographic image in three dimensions (normal, sexy, porn) and return confidence scores. Details"},{"location":"#vision-production","title":"Vision Production","text":"API Name Description API Image Super Resolution Upscale the resolution and enhance details in the images, and support image enhancement. Details"},{"location":"#natural-language-understanding-nlu","title":"Natural Language Understanding (NLU)","text":"API Name Description API Text Similarity Compare two Chinese words or sentences and return similarity score. Details General NLU Support a variety of Chinese text understanding tasks, such as text classification, sentiment analysis, extraction, and customizable labeling systems. Details <p>This implementation guide describes architectural considerations and configuration steps for deploying AI Solution Kit in the AWS cloud. It includes links to CloudFormation templates that launches and configures the AWS services required to deploy this solution using AWS best practices for security and availability.</p> <p>The guide is intended for IT architects, developers, DevOps, data engineers with practical experience architecting in the AWS Cloud.</p>"},{"location":"additional-resources/","title":"Additional resources","text":"<ul> <li>AWS Lambda</li> <li>Amazon SageMaker</li> <li>Amazon API Gateway</li> <li>Amazon ECR</li> <li>Amazon EFS</li> <li>AWS IAM</li> <li>Amazon EC2</li> <li>AWS CloudFormation</li> <li>Amazon S3</li> </ul>"},{"location":"api-explorer/","title":"Overview","text":"<p>You can call the following APIs to use the corresponding AI features.</p> <ul> <li>Lite OCR (Simplified Chinese)</li> <li>Lite OCR (Traditional Chinese)</li> <li>Advanced OCR (Multilingual)</li> <li>Custom OCR</li> <li>Car License Plate</li> <li>Face Detection</li> <li>Face Comparison</li> <li>Human Attribute Recognition</li> <li>Human Image Segmentation</li> <li>Image Similarity</li> <li>Object Recognition</li> <li>Pornography Detection</li> <li>Image Super Resolution</li> <li>Text Similarity</li> <li>General NLU</li> </ul>"},{"location":"api-explorer/#calling-url","title":"Calling URL","text":"<p>You have two options to call URL of AI features: </p> <ul> <li>When deploying the solution, set the parameter APIGatewayAuthorization to <code>NONE</code> to allow anonymous access to API.</li> <li>When deploying the solution, set the parameter  APIGatewayAuthorization to<code>AWS_IAM</code> to use the IAM permission to control access to API. For more information, see Invoking a REST API in Amazon API Gateway.</li> </ul>"},{"location":"api-explorer/#tools","title":"Tools","text":"<ul> <li>API Explorer</li> <li>Postman</li> <li>cURL</li> <li>Python</li> <li>Java</li> </ul>"},{"location":"architecture/","title":"Architecture overview","text":"<p>This solution architecture has two types of AI feature implementations: architecture based on AWS Lambda and architecture based on Amazon SageMaker.</p>"},{"location":"architecture/#architecture-based-on-aws-lambda","title":"Architecture based on AWS Lambda","text":"<ol> <li> <p>The user or application sends an API request to the Amazon API Gateway. The request payload needs to contain information about the image or text to be processed.</p> </li> <li> <p>Amazon API Gateway sends the incoming user request directly to the AWS Lambda function. </p> </li> <li> <p>The AWS Lambda function returns the result to the invoker.</p> </li> </ol>"},{"location":"architecture/#architecture-based-on-amazon-sagemaker","title":"Architecture based on Amazon SageMaker","text":"<ol> <li> <p>The user or application sends an API request to the Amazon API Gateway. The request payload needs to contain the image or text information to be processed.</p> </li> <li> <p>Amazon API Gateway sends the request to AWS Lambda (invoke endpoint) function.</p> </li> <li> <p>AWS Lambda invokes Amazon SageMaker Endpoint, which performs the inference process in Amazon SageMaker and returns the inference result (usually in JSON format data).</p> </li> </ol>"},{"location":"cost/","title":"Cost","text":"<p>You will be responsible for the cost of using each of the AWS services when running the solution. As of this revision, the main factors affecting the solution cost include:</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul> <p>You can refer to the Cost Estimation section corresponding to each API to check the deployment and actual usage cost estimation for each API feature.</p> API Cost Estimation Lite OCR (Simplified Chinese) View Lite OCR (Traditional Chinese) View Advanced OCR (Multilingual) View Custom OCR View Car License Plate View Face Detection View Face Comparison View Human Attribute Recognition View Human Image Segmentation View Image Similarity View Object Recognition View Pornography Detection View Image Super Resolution View Text Similarity View"},{"location":"deploy-add-delete-api/","title":"Update CloudFormation stack","text":""},{"location":"deploy-add-delete-api/#add-or-remove-ai-features","title":"Add or remove AI features","text":"<p>You can update the AWS CloudFormation stack to add new AI features or remove the AI feature already deployed. </p> <ol> <li> <p>Sign in to the AWS CloudFormation console.</p> </li> <li> <p>Select the root stack of this solution, not the nested stack. </p> </li> <li> <p>Choose Update.</p> <p></p> </li> <li> <p>Select Use current template, and choose Next.</p> </li> <li> <p>Update the parameters as needed, and choose Next. For example, if you have chosen <code>no</code> for Custom Template OCR, you can change it to <code>yes-Lambda</code> or <code>yes-SageMaker</code> to add this feature.</p> </li> <li> <p>On the Configure stack options page, choose Next.</p> </li> <li> <p>On the Review page, review and confirm the settings. Check the box acknowledging that the template will create AWS Identity and Access Management (IAM) resources.</p> </li> <li> <p>Choose Update stack to update the stack.</p> </li> </ol>"},{"location":"deploy-advanced-ocr/","title":"Advanced OCR (Multilingual)","text":"<p>Advanced OCR for multiple languages (Simplified Chinese, Traditional Chinese, Vietnamese, Korean, Japanese, English) and numbers, alphabetical characters, symbols. Return the information such as text or coordinates.</p>"},{"location":"deploy-advanced-ocr/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to a variety of scenarios such as paper documents changed to electronic format, document identification, and content review to improve information processing efficiency.</p>"},{"location":"deploy-advanced-ocr/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. <ul> <li>Example Request</li> </ul> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n  \"img\": \"Base64-encoded image data\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description words String Recognized text. location JSON Coordinates of the recognized text, including top, left, width, height as integer values. score Float Confidence score of the recognized text, which is a float type value between 0 and 1. <ul> <li>Example JSON response</li> </ul> <pre><code>[\n  {\n      \"words\": \"\u9999\u6e2f\u6c38\u4e45\u6027\u5c45\u6c11\u8eab\u4efd\u8b49\",\n      \"location\": {\n          \"top\": 18,\n          \"left\": 148,\n          \"width\": 169,\n          \"height\": 17\n      },\n      \"score\": 0.9923796653747559\n  },\n  {\n      \"words\": \"HONG KONG PERMANENTIDENTITYCARD\",\n      \"location\": {\n          \"top\": 36,\n          \"left\": 71,\n          \"width\": 321,\n          \"height\": 17\n      },\n      \"score\": 0.9825196266174316\n  }\n\n]\n</code></pre>"},{"location":"deploy-advanced-ocr/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-advanced-ocr/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-advanced-ocr/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-advanced-ocr/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/advanced_ocr\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/advanced_ocr' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-advanced-ocr/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/advanced_ocr'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-advanced-ocr/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/advanced_ocr\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-advanced-ocr/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/advanced_ocr\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-advanced-ocr/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-advanced-ocr/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-advanced-ocr/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-advanced-ocr/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Advanced OCR feature via Amazon CloudFormation as described in Add or remove AI features and make sure the AdvancedOCR parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 10 Minutes</p>"},{"location":"deploy-car-license-plate/","title":"Car License Plate","text":"<p>Recognize text on Chinese car license plate.</p>"},{"location":"deploy-car-license-plate/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to identifying car license plates in car parking lots and communities, or detecting vehicles for traffic violations.</p>"},{"location":"deploy-car-license-plate/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n  \"img\": \"Base64-encoded image data\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description words String Recognized license plate number. location JSON Coordinates of the recognized car license plate, including top, left, width, height as integer values. score Float Confidence score of the car license plate, which is a float type value between 0 and 1. <ul> <li>Example JSON response</li> </ul> <pre><code>[\n  {\n      \"words\": \"\u4eacC45678\",\n      \"location\": {\n          \"top\": 18,\n          \"left\": 148,\n          \"width\": 169,\n          \"height\": 17\n      },\n      \"score\": 0.9923796653747559\n  }\n]\n</code></pre>"},{"location":"deploy-car-license-plate/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-car-license-plate/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-car-license-plate/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-car-license-plate/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/car_license_plate\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/car_license_plate' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-car-license-plate/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/car_license_plate'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-car-license-plate/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/car_license_plate\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-car-license-plate/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/car_license_plate\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-car-license-plate/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-car-license-plate/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-car-license-plate/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-car-license-plate/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Car License Plate feature via Amazon CloudFormation as described in Add or remove AI features and make sure the CarLicensePlate parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 6 Minutes</p>"},{"location":"deploy-custom-ocr/","title":"Custom OCR","text":"<p>You can customize the OCR template, extract the structured text information in cards and tickets, and display the results in the key-value format.</p>"},{"location":"deploy-custom-ocr/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to structured recognition of cards and tickets, such as logistics documents, invoices, business licenses, itineraries, and train tickets.</p>"},{"location":"deploy-custom-ocr/#api-reference","title":"API reference","text":""},{"location":"deploy-custom-ocr/#add-templates","title":"Add templates","text":"<p>Before text recognition, you need to create a template through the Add Template API. In order to improve the accuracy of text recognition, the image for template creation should have similar details to the recognized image and clear text content. The same template can contain multiple recognition areas.</p> <p>To create a template, each area to be recognized needs to specify the four coordinate points of the rectangular frame and the name of the area. You can use common image processing software such as GIMP to assist in obtaining coordinate points. </p> <p>The following describes how to create a template:</p> <ol> <li>Go to Tools.</li> <li>Click Select Local Image.</li> <li>Move the mouse over the image, click the top left corner of the content to be recognized, then slide the mouse to the bottom right corner, release the mouse and enter the corresponding logo name in the pop-up dialog box.</li> <li>Repeat step 3 if there are multiple contents to be recognized.</li> <li>Click Copy Result to Clipboard, this content is request Body, create a custom template, and record the template ID after successful creation.</li> <li>After creating the template, first conduct a text recognition test with the original image and template ID to ensure that the template can accurately recognize the required information.</li> <li>(Optional) If you find that the extracted information is incomplete, please confirm that the coordinate points are marked correctly and recreate the template by expanding the recognition area appropriately. </li> </ol> <p>Important</p> <p>The rectangular box area must completely cover the text content to be recognized. Leave enough space for error tolerance on all sides of the recognition area without covering other recognition rectangular areas for accurate recognition.</p> <p>The following describe the API reference:</p> <ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64-encoded image data. type String Fixed value is <code>add</code>. template List Each element corresponds to the coordinates of an area to be extracted and its name. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n    \"type\": \"add\", \n    \"url\": \"Image URL address\", \n    \"template\": [\n        [\n            [[421, 465], [909, 471], [911, 503], [419, 495]], \"\u540d\u79f0\"\n        ], \n        [\n            [[419, 495], [911, 503], [909, 533], [415, 527]], \"\u8bc6\u522b\u53f7\"\n        ], \n        [\n            [[345, 339], [595, 343], [583, 397], [341, 385]], \"\u53d1\u7968\u53f7\"\n        ]\n    ]\n}\n</code></pre> <pre><code>{\n  \"type\": \"add\", \n  \"img\": \"Base64-encoded image data\",\n  \"template\": [\n        [\n            [[421, 465], [909, 471], [911, 503], [419, 495]], \"\u540d\u79f0\"\n        ], \n        [\n            [[419, 495], [911, 503], [909, 533], [415, 527]], \"\u8bc6\u522b\u53f7\"\n        ], \n        [\n            [[345, 339], [595, 343], [583, 397], [341, 385]], \"\u53d1\u7968\u53f7\"\n        ]\n    ]\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description template_id String Template ID <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"template_id\": \"\u6a21\u677f\u7684ID\",\n}\n</code></pre>"},{"location":"deploy-custom-ocr/#content-recognition","title":"Content recognition","text":"<p>After the template is created, you can use the corresponding template ID to perform text recognition on the image, and the returned value is the name and text content of the recognized area in the template.</p> <ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. type String Fixed value is <code>query</code>. template_id String Existing template ID. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n  \"template_id\": \"\u5df2\u5b58\u5728\u7684\u6a21\u677fID\", \n  \"url\": \"Image URL address\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description key String Field name. value String Extracted value. score Float Confidence score. <ul> <li>Example JSON response</li> </ul> <pre><code>[\n    {\n        \"key\": \"\u540d\u79f0\", \n        \"value\": \"\u4e9a\u9a6c\u900a\u901a\u6280\u672f\u670d\u52a1(\u5317\u4eac)\u6709\u9650\u516c\u53f8\", \n        \"score\": 97.98\n    }, \n    {\n        \"key\": \"\u8bc6\u522b\u53f7\", \n        \"value\": \"91110116592334142D\", \n        \"score\": 99.62\n    }, \n    {\n        \"key\": \"\u53d1\u7968\u53f7\", \n        \"value\": \"4403212222\", \n        \"score\": 96.58\n    }\n]\n</code></pre>"},{"location":"deploy-custom-ocr/#remove-templates","title":"Remove templates","text":"<p>If you need to delete a template, you can delete it by specifying the template ID to be deleted. Note that a template cannot be recovered after it has been deleted.</p> <ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description template_id List Existing template ID. type String Fixed value is <code>del</code>. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n    \"type\": \"del\", \n    \"template_id\": \"\u5df2\u5b58\u5728\u6a21\u677fID\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description template_id String Removed template ID. <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"template_id\": \"\u5df2\u5220\u9664\u6a21\u677f\u7684ID\",\n}\n</code></pre>"},{"location":"deploy-custom-ocr/#list-all-templates","title":"List all templates","text":"<p>The created templates can be listed by ID.</p> <ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Description type String Fixed value is <code>list</code>. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n    \"type\": \"list\", \n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description template_id_list List List of existing templates. <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"template_id_list\": [\"\u5df2\u5b58\u5728\u6a21\u677f\u7684\u5217\u8868\"],\n}\n</code></pre>"},{"location":"deploy-custom-ocr/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-custom-ocr/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-custom-ocr/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-custom-ocr/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/custom_ocr\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/custom_ocr' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-custom-ocr/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/custom_ocr'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-custom-ocr/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/custom_ocr\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-custom-ocr/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/custom_ocr\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-custom-ocr/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-custom-ocr/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-custom-ocr/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-custom-ocr/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Custom OCR feature via Amazon CloudFormation as described in Add or remove AI features and make sure the CustomOCR parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 20 Minutes</p>"},{"location":"deploy-face-comparison/","title":"Face Comparison","text":"<p>Compare two faces of the same person and return a confidence score of the similarity.</p>"},{"location":"deploy-face-comparison/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to customer authentication, photo classification and other scenarios, such as self-service hotel check-in, personnel check-in, campus entrance passage, and photo album production.</p>"},{"location":"deploy-face-comparison/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n  \"img\": \"Base64-encoded image data\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description Faces List List of detected faces in the image. face_hash List List with 768 parameters for a 768-dimensional face vector. BoundingBox JSON Coordinate values of the face in the image, including the percentage of top, left, width, height relative to the full screen. Confidence Float Confidence score of the recognized face, which is a float type value between 0 and 1. FaceModelVersion String Current model version. <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"Faces\": [\n        {\n            \"BoundingBox\": {\n                \"Width\": 0.057923507690429685, \n                \"Height\": 0.10426715253778117, \n                \"Left\": 0.5258836364746093, \n                \"Top\": 0.40569204600369024\n            }, \n            \"Confidence\": 0.8736226558685303, \n            \"face_hash\": [64.8125, -86.8125, -9.84375, 12.390625, 161.625, ..., 4.8046875\n            ]\n        }, \n        {\n            \"BoundingBox\": {\n                \"Width\": 0.04332921028137207, \n                \"Height\": 0.10577215250117152, \n                \"Left\": 0.1566245174407959, \n                \"Top\": 0.6526811308355788\n            }, \n            \"Confidence\": 0.8055327534675598, \n            \"face_hash\": [61.21875, -33.84375, -36.71875, 70.625, 110.125, ..., -28.421875\n            ]\n        }\n    ], \n    \"FaceModelVersion\": \"1.2.0\"\n}\n</code></pre>"},{"location":"deploy-face-comparison/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-face-comparison/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-face-comparison/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-face-comparison/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/face_comparison\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/face_comparison' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-face-comparison/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/face_comparison'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-face-comparison/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/face_comparison\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-face-comparison/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/face_comparison\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-face-comparison/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-face-comparison/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-face-comparison/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-face-comparison/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Face Comparison feature via Amazon CloudFormation as described in Add or remove AI features and make sure the FaceComparison parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 6 Minutes</p>"},{"location":"deploy-face-detection/","title":"Face Detection","text":"<p>Detect the face in an image, and map the detected facial features and contour key point information to 106 vector coordinates.</p>"},{"location":"deploy-face-detection/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to a variety of scenarios such as camera monitoring, facial feature analysis, and interactive marketing.</p>"},{"location":"deploy-face-detection/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n  \"img\": \"Base64-encoded image data\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description Faces List List of detected faces in the image. landmark_106 List 106 contour key points. x Int Number of pixels the key point from the left edge. y Int Number of pixels the key point from the upper edge. gender String Gender information. age String Age information. BoundingBox JSON Coordinate values of the face in the image, including the percentage of top, left, width, height relative to the full screen. Confidence Float Confidence score of the recognized face, which is a float type value between 0 and 1. FaceModelVersion String Current model version. <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"Faces\": [\n        {\n            \"BoundingBox\": {\n                \"Width\": 0.057923507690429685, \n                \"Height\": 0.10426715253778117, \n                \"Left\": 0.5258836364746093, \n                \"Top\": 0.40569204600369024\n            }, \n            \"Confidence\": 0.8736226558685303, \n            \"landmark_106\": [\n                {\"x\": 894, \"y\": 542}, \n                {\"x\": 846, \"y\": 461}, \n                ...\n            ], \n            \"gender\": \"male\", \n            \"age\": 27\n        }, \n        {\n            \"BoundingBox\": {\n                \"Width\": 0.04332921028137207, \n                \"Height\": 0.10577215250117152, \n                \"Left\": 0.1566245174407959, \n                \"Top\": 0.6526811308355788\n            }, \n            \"Confidence\": 0.8055327534675598, \n            \"landmark_106\": [\n                {\"x\": 306, \"y\": 802}, \n                {\"x\": 254, \"y\": 734}, \n                ...\n            ], \n            \"gender\": \"male\", \n            \"age\": 35\n        }\n    ], \n    \"FaceModelVersion\": \"1.2.0\"\n}\n</code></pre>"},{"location":"deploy-face-detection/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-face-detection/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-face-detection/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-face-detection/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/face_detection\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/face_detection' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-face-detection/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/face_detection'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-face-detection/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/face_detection\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-face-detection/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/face_detection\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-face-detection/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-face-detection/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-face-detection/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-face-detection/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Face Detection feature via Amazon CloudFormation as described in Add or remove AI features and make sure the FaceDetection parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 6 Minutes</p>"},{"location":"deploy-general-nlu/","title":"General NLU","text":"<p>Support a variety of Chinese text understanding tasks, such as text classification, sentiment analysis, extraction, and customizable labeling systems.</p>"},{"location":"deploy-general-nlu/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Used in scenarios such as text classification, sentiment analysis, text matching, and entity recognition.</p> <p>Note</p> <p>In version 1.4.0, General NLU API only supports Chinese language processing.</p>"},{"location":"deploy-general-nlu/#api-reference","title":"API reference","text":""},{"location":"deploy-general-nlu/#text-classification","title":"Text classification","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description subtask_type String Yes Has the fixed value of \"Text Classification\". text String Yes Indicates the text to be classified. choices List Yes Indicates the candidate labels. For more information, please refer to the Request Body Example. question String Yes Used to prompt the model for guidance. <ul> <li>Example Request</li> </ul> <p>Example 1</p> <pre><code>{\n    \"subtask_type\": \"\u6587\u672c\u5206\u7c7b\",\n    \"text\": \"\u5f85\u5206\u7c7b\u7684\u6587\u672c\",\n    \"choices\": [{\n        \"entity_type\": \"\u6295\u8d44\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u79d1\u6280\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u4f53\u80b2\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u7f8e\u98df\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u65c5\u6e38\",\n        \"label\": 0,\n        \"entity_list\": []\n    }],\n    \"question\": \"\u8fd9\u662f\u7bc7\u4ec0\u4e48\u7c7b\u578b\u7684\u65b0\u95fb\"\n}\n</code></pre> <p>Example 2</p> <pre><code>{\n    \"subtask_type\": \"\u6587\u672c\u5206\u7c7b\",\n    \"text\": \"\u5f85\u5206\u7c7b\u7684\u6587\u672c\",\n    \"choices\": [{\n        \"entity_type\": \"\u519c\u4e1a\u5de5\u7a0b\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u54f2\u5b66\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u6559\u80b2\u5b66\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u7406\u5b66\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u519c\u5b66\",\n        \"label\": 0,\n        \"entity_list\": []\n    }],\n    \"question\": \"\u8fd9\u7bc7\u6587\u7ae0\u5c5e\u4e8e\u54ea\u4e2a\u5b66\u79d1\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description result Dict Same format as the request parameters, with the label of the corresponding option set to 1 and an added score. Please refer to the Response Example for details. <ul> <li>Example JSON response</li> </ul> <p>Example 1 Response</p> <p>Assume the model returns the category of the \"unclassified text\" as \"sports.\"</p> <pre><code>{\n    \"subtask_type\": \"\u6587\u672c\u5206\u7c7b\",\n    \"text\": \"\u5f85\u5206\u7c7b\u7684\u6587\u672c\",\n    \"choices\": [{\n        \"entity_type\": \"\u6295\u8d44\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u79d1\u6280\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u4f53\u80b2\",\n        \"label\": 1,\n        \"entity_list\": [],\n        \"score\": 0.91592306\n    }, {\n        \"entity_type\": \"\u7f8e\u98df\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u65c5\u6e38\",\n        \"label\": 0,\n        \"entity_list\": []\n    }],\n    \"question\": \"\u8fd9\u662f\u7bc7\u4ec0\u4e48\u7c7b\u578b\u7684\u65b0\u95fb\"\n}\n</code></pre> <p>Example 2 Response</p> <pre><code>{\n    \"subtask_type\": \"\u6587\u672c\u5206\u7c7b\",\n    \"text\": \"\u5f85\u5206\u7c7b\u7684\u6587\u672c\",\n    \"choices\": [{\n        \"entity_type\": \"\u519c\u4e1a\u5de5\u7a0b\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u54f2\u5b66\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u6559\u80b2\u5b66\",\n        \"label\":1,\n        \"entity_list\": [],\n        \"score\": 0.91592306\n    }, {\n        \"entity_type\": \"\u7406\u5b66\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u519c\u5b66\",\n        \"label\": 0,\n        \"entity_list\": []\n    }],\n    \"question\": \"\u8fd9\u7bc7\u6587\u7ae0\u5c5e\u4e8e\u54ea\u4e2a\u5b66\u79d1\"\n}\n</code></pre>"},{"location":"deploy-general-nlu/#sentiment-analysis","title":"Sentiment analysis","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description subtask_type String Yes Fixed as \"Sentiment Classification\" text String Yes The text to be classified choices List Yes Candidate sentiment labels, please refer to the Request Body Example question String Yes Used to prompt the model for guidance <ul> <li>Example Request</li> </ul> <pre><code>{\n    \"subtask_type\": \"\u60c5\u611f\u5206\u7c7b\",\n    \"text\": \"\u5f85\u5206\u7c7b\u7684\u7528\u6237\u8bc4\u8bba\",\n    \"choices\": [{\n        \"entity_type\": \"\u79ef\u6781\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u4e2d\u6027\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u6d88\u6781\",\n        \"label\": 0,\n        \"entity_list\": []\n    }],\n    \"question\": \"\u8fd9\u53e5\u8bdd\u7684\u60c5\u611f\u6781\u6027\u662f\u4ec0\u4e48\"\n}\n\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description result Dict Same format as the request parameters, with the label of the corresponding option set to 1 and an added score. Please refer to the Response Example for details. <ul> <li>Example JSON response</li> </ul> <p>Assume the model returns the sentiment polarity of the \"unclassified user comment\" as \"neutral.\"</p> <pre><code>{\n    \"subtask_type\": \"\u60c5\u611f\u5206\u7c7b\",\n    \"text\": \"\u5f85\u5206\u7c7b\u7684\u7528\u6237\u8bc4\u8bba\",\n    \"choices\": [{\n        \"entity_type\": \"\u79ef\u6781\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u4e2d\u6027\",\n        \"label\": 1,\n        \"entity_list\": [],\n        \"score\": 0.91592306\n    }, {\n        \"entity_type\": \"\u6d88\u6781\",\n        \"label\": 0,\n        \"entity_list\": []\n    }],\n    \"question\": \"\u8fd9\u53e5\u8bdd\u7684\u60c5\u611f\u6781\u6027\u662f\u4ec0\u4e48\"\n}\n</code></pre>"},{"location":"deploy-general-nlu/#text-matching","title":"Text matching","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description subtask_type String Yes Has the fixed value of \"Text Matching\" text String Yes Indicates the first text choices List Yes The entity_type of each element is the concatenation of the prompt word with the second text, for example, \"can be inferred: second text\" or \"can be understood as: second text\". Please refer to the Request Body Example for details. question String Yes Prompts the model for guidance <ul> <li>Example Request</li> </ul> <p>Example 1</p> <pre><code>{\n    \"subtask_type\": \"\u6587\u672c\u5339\u914d\",\n    \"text\": \"\u5728\u767d\u4e91\u7684\u84dd\u5929\u4e0b\uff0c\u4e00\u4e2a\u5b69\u5b50\u4f38\u624b\u6478\u7740\u505c\u5728\u8349\u5730\u4e0a\u7684\u4e00\u67b6\u98de\u673a\u7684\u87ba\u65cb\u6868\u3002\",\n    \"choices\": [{\n        \"entity_type\": \"\u53ef\u4ee5\u63a8\u65ad\u51fa\uff1a\u4e00\u4e2a\u5b69\u5b50\u6b63\u4f38\u624b\u6478\u98de\u673a\u7684\u87ba\u65cb\u6868\u3002\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u4e0d\u80fd\u63a8\u65ad\u51fa\uff1a\u4e00\u4e2a\u5b69\u5b50\u6b63\u4f38\u624b\u6478\u98de\u673a\u7684\u87ba\u65cb\u6868\u3002\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u5f88\u96be\u63a8\u65ad\u51fa\uff1a\u4e00\u4e2a\u5b69\u5b50\u6b63\u4f38\u624b\u6478\u98de\u673a\u7684\u87ba\u65cb\u6868\u3002\",\n        \"label\": 0,\n        \"entity_list\": []\n    }],\n    \"question\": \"\u540c\u4e49\u6587\u672c\"\n}\n\n</code></pre> <p>Example 2</p> <pre><code>{\n    \"subtask_type\": \"\u6587\u672c\u5339\u914d\",\n    \"text\": \"\u60a8\u597d\uff0c\u6211\u8fd8\u6b3e\u4e86\u600e\u4e48\u8fd8\u6ca1\u6263\u6b3e\",\n    \"choices\": [{\n        \"entity_type\": \"\u53ef\u4ee5\u7406\u89e3\u4e3a\uff1a\u4eca\u5929\u4e00\u76f4\u6ca1\u6709\u6263\u6b3e\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u4e0d\u80fd\u7406\u89e3\u4e3a\uff1a\u4eca\u5929\u4e00\u76f4\u6ca1\u6709\u6263\u6b3e\",\n        \"label\": 0,\n        \"entity_list\": []\n    }],\n    \"question\": \"\u540c\u4e49\u6587\u672c\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description result Dict Same format as the request parameters, with the label of the corresponding option set to 1 and an added score. Please refer to the Response Example for details. <ul> <li>Example JSON response</li> </ul> <p>Example 1 response</p> <pre><code>{\n    \"subtask_type\": \"\u6587\u672c\u5339\u914d\",\n    \"text\": \"\u5728\u767d\u4e91\u7684\u84dd\u5929\u4e0b\uff0c\u4e00\u4e2a\u5b69\u5b50\u4f38\u624b\u6478\u7740\u505c\u5728\u8349\u5730\u4e0a\u7684\u4e00\u67b6\u98de\u673a\u7684\u87ba\u65cb\u6868\u3002\",\n    \"choices\": [{\n        \"entity_type\": \"\u53ef\u4ee5\u63a8\u65ad\u51fa\uff1a\u4e00\u4e2a\u5b69\u5b50\u6b63\u4f38\u624b\u6478\u98de\u673a\u7684\u87ba\u65cb\u6868\u3002\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u4e0d\u80fd\u63a8\u65ad\u51fa\uff1a\u4e00\u4e2a\u5b69\u5b50\u6b63\u4f38\u624b\u6478\u98de\u673a\u7684\u87ba\u65cb\u6868\u3002\",\n        \"label\": 1,\n        \"entity_list\": [],\n        \"score\": 0.91592306\n    }, {\n        \"entity_type\": \"\u5f88\u96be\u63a8\u65ad\u51fa\uff1a\u4e00\u4e2a\u5b69\u5b50\u6b63\u4f38\u624b\u6478\u98de\u673a\u7684\u87ba\u65cb\u6868\u3002\",\n        \"label\": 0,\n        \"entity_list\": []\n    }],\n    \"question\": \"\u540c\u4e49\u6587\u672c\"\n}\n\n</code></pre> <p>Example 2 response</p> <pre><code>{\n    \"subtask_type\": \"\u6587\u672c\u5339\u914d\",\n    \"text\": \"\u60a8\u597d\uff0c\u6211\u8fd8\u6b3e\u4e86\u600e\u4e48\u8fd8\u6ca1\u6263\u6b3e\",\n    \"choices\": [{\n        \"entity_type\": \"\u53ef\u4ee5\u7406\u89e3\u4e3a\uff1a\u4eca\u5929\u4e00\u76f4\u6ca1\u6709\u6263\u6b3e\",\n        \"label\": 1,\n        \"entity_list\": [],\n        \"score\": 0.91592306\n    }, {\n        \"entity_type\": \"\u4e0d\u80fd\u7406\u89e3\u4e3a\uff1a\u4eca\u5929\u4e00\u76f4\u6ca1\u6709\u6263\u6b3e\",\n        \"label\": 0,\n        \"entity_list\": []\n    }],\n    \"question\": \"\u540c\u4e49\u6587\u672c\"\n}\n</code></pre>"},{"location":"deploy-general-nlu/#entity-recognition","title":"Entity recognition","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description subtask_type String Yes Fixed as \"Entity Recognition\" text String Yes The text to be classified choices List Yes The entity_type of each element represents the desired entity type to extract. Please refer to the Request Body Example for details. <ul> <li>Example Request</li> </ul> <pre><code>{\n    \"subtask_type\": \"\u5b9e\u4f53\u8bc6\u522b\",\n    \"text\": \"\u6211\u4eec\u662f\u9996\u5bb6\u652f\u6301\u82f1\u7279\u5c14\u3001AMD \u548c Arm \u5904\u7406\u5668\u7684\u4e3b\u8981\u4e91\u63d0\u4f9b\u5546\",\n    \"choices\": [{\n        \"entity_type\": \"\u5730\u5740\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u516c\u53f8\u540d\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u4eba\u7269\u59d3\u540d\",\n        \"label\": 0,\n        \"entity_list\": []\n    }]\n}\n\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description result Dict Same format as the request parameters, with the entity_list corresponding to the extracted entities added with their content and position. Please refer to the Response Example for details. <ul> <li>Example JSON response</li> </ul> <p>Assume the model returns the sentiment polarity of the \"unclassified user comment\" as \"neutral.\"</p> <pre><code>{\n    \"subtask_type\": \"\u5b9e\u4f53\u8bc6\u522b\",\n    \"text\": \"\u6211\u4eec\u662f\u9996\u5bb6\u652f\u6301\u82f1\u7279\u5c14\u3001AMD \u548c Arm \u5904\u7406\u5668\u7684\u4e3b\u8981\u4e91\u63d0\u4f9b\u5546\",\n    \"choices\": [{\n        \"entity_type\": \"\u5730\u5740\",\n        \"label\": 0,\n        \"entity_list\": []\n    }, {\n        \"entity_type\": \"\u516c\u53f8\u540d\",\n        \"label\": 0,\n        \"entity_list\": [{\n            \"entity_name\":\"\u82f1\u7279\u5c14\",\n            \"entity_type\":\"\u516c\u53f8\u540d\",\n            \"entity_idx\":[\n                [7, 9]\n            ]\n        },{\n            \"entity_name\":\"AMD\",\n            \"entity_type\":\"\u516c\u53f8\u540d\",\n            \"entity_idx\":[\n                [11, 13]\n            ]\n        }]\n    }, {\n        \"entity_type\": \"\u4eba\u7269\u59d3\u540d\",\n        \"label\": 0,\n        \"entity_list\": []\n    }]\n}\n</code></pre>"},{"location":"deploy-general-nlu/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-general-nlu/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-general-nlu/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-general-nlu/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_nlu\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_nlu' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-general-nlu/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_nlu'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-general-nlu/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_nlu\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-general-nlu/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/general_nlu\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-general-nlu/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-general-nlu/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-general-nlu/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-general-nlu/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the General NLU feature via Amazon CloudFormation as described in Add or remove AI features and make sure the GeneralNLU parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 10 Minutes</p>"},{"location":"deploy-general-ocr-traditional/","title":"Lite OCR (Traditional Chinese)","text":"<p>Recognize and extract Traditional Chinese, numbers, alphabetical characters and symbols from images. Return the information such as text or coordinates.</p>"},{"location":"deploy-general-ocr-traditional/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to a variety of scenarios such as paper documents changed to electronic format, document identification, and content review to improve information processing efficiency.</p>"},{"location":"deploy-general-ocr-traditional/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n\"url\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n\"img\": \"Base64-encoded image data\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description words String Recognized text. location JSON Coordinates of the recognized text, including top, left, width, height as integer values. score Float Confidence score of the recognized text, which is a float type value between 0 and 1. <ul> <li>Example JSON response</li> </ul> <pre><code>[\n  {\n      \"words\": \"\u9999\u6e2f\u6c38\u4e45\u6027\u5c45\u6c11\u8eab\u4efd\u8b49\",\n      \"location\": {\n          \"top\": 18,\n          \"left\": 148,\n          \"width\": 169,\n          \"height\": 17\n      },\n      \"score\": 0.9923796653747559\n  },\n  {\n      \"words\": \"HONG KONG PERMANENTIDENTITYCARD\",\n      \"location\": {\n          \"top\": 36,\n          \"left\": 71,\n          \"width\": 321,\n          \"height\": 17\n      },\n      \"score\": 0.9825196266174316\n  }\n\n]\n</code></pre>"},{"location":"deploy-general-ocr-traditional/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-general-ocr-traditional/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-general-ocr-traditional/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-general-ocr-traditional/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_ocr_traditional\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_ocr_traditional' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-general-ocr-traditional/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_ocr_traditional'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-general-ocr-traditional/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_ocr_traditional\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-general-ocr-traditional/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/general_ocr_traditional\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-general-ocr-traditional/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-general-ocr-traditional/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-general-ocr-traditional/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-general-ocr-traditional/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the General OCR (Traditional Chinese) feature via Amazon CloudFormation as described in Add or remove AI features and make sure the GeneralOCRTraditional parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 10 Minutes</p>"},{"location":"deploy-general-ocr/","title":"Lite OCR (Simplified Chinese)","text":"<p>Recognize and extract Simplified Chinese, numbers, alphabetical characters and symbols. Return the information such as text or coordinates.</p>"},{"location":"deploy-general-ocr/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to a variety of scenarios such as paper documents changed to electronic format, document identification, and content review to improve information processing efficiency.</p>"},{"location":"deploy-general-ocr/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. <ul> <li>Example Request</li> </ul> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n  \"img\": \"Base64-encoded image data\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description words String Recognized text. location JSON Coordinates of the recognized text, including top, left, width, height as integer values. score Float Confidence score of the recognized text, which is a float type value between 0 and 1. <ul> <li>Example JSON response</li> </ul> <pre><code>[\n  {\n      \"words\": \"\u9999\u6e2f\u6c38\u4e45\u6027\u5c45\u6c11\u8eab\u4efd\u8b49\",\n      \"location\": {\n          \"top\": 18,\n          \"left\": 148,\n          \"width\": 169,\n          \"height\": 17\n      },\n      \"score\": 0.9923796653747559\n  },\n  {\n      \"words\": \"HONG KONG PERMANENTIDENTITYCARD\",\n      \"location\": {\n          \"top\": 36,\n          \"left\": 71,\n          \"width\": 321,\n          \"height\": 17\n      },\n      \"score\": 0.9825196266174316\n  }\n]\n</code></pre>"},{"location":"deploy-general-ocr/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-general-ocr/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-general-ocr/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-general-ocr/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_ocr\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_ocr' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-general-ocr/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_ocr'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-general-ocr/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/general_ocr\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-general-ocr/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/general_ocr\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-general-ocr/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-general-ocr/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-general-ocr/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-general-ocr/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the General OCR (Simplified Chinese) feature via Amazon CloudFormation as described in Add or remove AI features and make sure the GeneralOCR parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 10 Minutes</p>"},{"location":"deploy-human-attribute-recognition/","title":"Human Attribute Recognition","text":"<p>Recognize the attributes of the human body in the image, and return the human body position coordinates and attribute analysis in each area, including the semantic information of 16 attributes such as gender, age, and clothing.</p>"},{"location":"deploy-human-attribute-recognition/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to scenarios such as smart security, smart retail, and pedestrian search.</p>"},{"location":"deploy-human-attribute-recognition/#list-of-attributes","title":"List of attributes","text":"Name Semantic Upper wear Short sleeve, Long sleeve Lower wear Shorts/Skirts, Pants/Skirts Upper wear texture Pattern, Solid, Stripe/Check Backpack Without bag, With bag Whether to wear glasses No, Yes Whether to wear a hat No, Yes Body orientation Front, Back, Left, Right Truncate above No, Yes Truncate below No, Yes Occlusion None, Light, Heavy Whether to wear a mask No, Yes Gender Male, Female Age Children, teenager, middle-aged, elderly Smoking No, Yes Telephone No, Yes Whether to carry things No, Yes"},{"location":"deploy-human-attribute-recognition/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n  \"img\": \"Base64-encoded image data\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description Labels List List of human bodies recognized in the image. upper_wear Dict Short Sleeve, Long Sleeve upper_wear_texture Dict Pattern, Solid, Stripe/Check lower_wear Dict Shorts/Skirts, Pants/Skirts glasses Dict With glasses, without glasses bag Dict With backpack, without backpack headwear Dict With hat, without hat orientation Dict left side, back side, front side, right side upper_cut Dict with truncation, without truncation lower_cut Dict with truncation, without truncation occlusion Dict No Occlusion, Light Occlusion, Heavy Occlusion face_mask Dict With mask, without mask gender Dict Male, Female age Dict Children, Teens, Middle-aged, Seniors smoke Dict Smoking, non-smoking cellphone Dict with telephone, without telephone carrying_item Dict With or without carry BoundingBox Dict Coordinate values of the human body in the image, including the percentage of top, left, width, height relative to the full screen LabelModelVersion String Current model version number <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"Labels\": [\n        {\n            \"upper_wear\": {\n                \"\u77ed\u8896\": 0.01, \n                \"\u957f\u8896\": 99.99\n            }, \n            \"upper_wear_texture\": {\n                \"\u56fe\u6848\": 0, \n                \"\u7eaf\u8272\": 99.55, \n                \"\u6761\u7eb9/\u683c\u5b50\": 0.45\n            }, \n            \"lower_wear\": {\n                \"\u77ed\u88e4/\u88d9\": 0.15, \n                \"\u957f\u88e4/\u88d9\": 99.85\n            }, \n            \"glasses\": {\n                \"\u6709\u773c\u955c\": 57.74, \n                \"\u65e0\u773c\u955c\": 42.26\n            }, \n            \"bag\": {\n                \"\u6709\u80cc\u5305\": 0.69, \n                \"\u65e0\u80cc\u5305\": 99.31\n            }, \n            \"headwear\": {\n                \"\u6709\u5e3d\": 97.02, \n                \"\u65e0\u5e3d\": 2.98\n            }, \n            \"orientation\": {\n                \"\u5de6\u4fa7\u9762\": 99.99, \n                \"\u80cc\u9762\": 0, \n                \"\u6b63\u9762\": 0, \n                \"\u53f3\u4fa7\u9762\": 0.01\n            }, \n            \"upper_cut\": {\n                \"\u6709\u622a\u65ad\": 0, \n                \"\u65e0\u622a\u65ad\": 100\n            }, \n            \"lower_cut\": {\n                \"\u65e0\u622a\u65ad\": 0.18, \n                \"\u6709\u622a\u65ad\": 99.82\n            }, \n            \"occlusion\": {\n                \"\u65e0\u906e\u6321\": 100, \n                \"\u91cd\u5ea6\u906e\u6321\": 0, \n                \"\u8f7b\u5ea6\u906e\u6321\": 0\n            }, \n            \"face_mask\": {\n                \"\u65e0\u53e3\u7f69\": 100, \n                \"\u6234\u53e3\u7f69\": 0\n            }, \n            \"gender\": {\n                \"\u7537\u6027\": 100, \n                \"\u5973\u6027\": 0\n            }, \n            \"age\": {\n                \"\u5e7c\u513f\": 0, \n                \"\u9752\u5c11\u5e74\": 100, \n                \"\u4e2d\u5e74\": 0, \n                \"\u8001\u5e74\": 0\n            }, \n            \"smoke\": {\n                \"\u5438\u70df\": 0, \n                \"\u672a\u5438\u70df\": 100\n            }, \n            \"cellphone\": {\n                \"\u4f7f\u7528\u624b\u673a\": 0, \n                \"\u672a\u4f7f\u7528\u624b\u673a\": 100\n            }, \n            \"carrying_item\": {\n                \"\u6709\u624b\u63d0\u7269\": 0.03, \n                \"\u65e0\u624b\u63d0\u7269\": 99.97\n            }, \n            \"BoundingBox\": {\n                \"Width\": 0.11781848725818456, \n                \"Height\": 0.43450208474661556, \n                \"Left\": 0.5310931977771577, \n                \"Top\": 0.45263674786982644\n            }\n        }, \n        ...\n    ], \n    \"LabelModelVersion\": \"1.2.0\"\n}\n</code></pre>"},{"location":"deploy-human-attribute-recognition/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-human-attribute-recognition/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-human-attribute-recognition/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-human-attribute-recognition/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/custom_ocr\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/custom_ocr' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-human-attribute-recognition/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/custom_ocr'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-human-attribute-recognition/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/custom_ocr\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-human-attribute-recognition/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/custom_ocr\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-human-attribute-recognition/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-human-attribute-recognition/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-human-attribute-recognition/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-human-attribute-recognition/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Human Attribute Recognition feature via Amazon CloudFormation as described in Add or remove AI features and make sure the HumanAttributeRecognition parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 10 Minutes</p>"},{"location":"deploy-human-image-segmentation/","title":"Human Image Segmentation","text":"<p>Segment human bodies from background and return the alpha channel which is a color component representing the degree of transparency of a color.</p>"},{"location":"deploy-human-image-segmentation/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to photo background replacement, post-processing, ID photo production, portrait cutout beautification, background blur and many other scenarios.</p>"},{"location":"deploy-human-image-segmentation/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. type String No By default, type is empty, and it will return the Base64 encoding of the Alpha channel of the image after removing the background. When type is <code>foreground</code>, it will return the Base64 encoding of the transparent background image in PNG format. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n\"url\": \"Image URL address\",\n\"type\": \"foreground\"\n}\n</code></pre> <pre><code>{\n\"img\": \"Base64-encoded image data\",\n\"type\": \"foreground\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description result String Base64 encoded image data <ul> <li>Example JSON response</li> </ul> <pre><code>{\n  \"result\": \"Base64 encoded image data\"\n}\n</code></pre>"},{"location":"deploy-human-image-segmentation/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-human-image-segmentation/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-human-image-segmentation/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-human-image-segmentation/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/human_image_segmentation\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/human_image_segmentation' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-human-image-segmentation/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/human_image_segmentation'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-human-image-segmentation/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/human_image_segmentation\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-human-image-segmentation/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/human_image_segmentation\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-human-image-segmentation/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-human-image-segmentation/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 10240MB memory, 1 seconds run each time \u00a51134.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51237.06"},{"location":"deploy-human-image-segmentation/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 4 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 10240MB memory, 1 seconds run each time $166.7 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $176.35"},{"location":"deploy-human-image-segmentation/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Human Image Segmentation feature via Amazon CloudFormation as described in Add or remove AI features and make sure the HumanImageSegmentation parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 9 Minutes</p>"},{"location":"deploy-image-similarity/","title":"Image Similarity","text":"<p>Compare two images by calculating the cosine distance from the image feature vector and converting it into confidence, and return similarity score.</p>"},{"location":"deploy-image-similarity/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to scenarios such as commodity recognition, remake recognition, and intelligent photo albums.</p>"},{"location":"deploy-image-similarity/#api-reference","title":"API reference","text":"<p>The API supports two input modes: single image and image pair.</p>"},{"location":"deploy-image-similarity/#single-image-mode","title":"Single image mode","text":"<p>With a single image as input, it returns the feature vectors of the image. You need to maintain a vector retrieval system. This is applicable to search or callback scenarios.</p> <ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String CChoose url or img. Base64 encoded image data. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n\"url\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n\"img\": \"Base64-encoded image data\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description result List List with 512 parameters for a 512-dimensional image vector. <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"result\": [\n        -0.02555299922823906, \n        0.012955999933183193, \n        -0.10079500079154968, \n        ...\n    ]\n}\n</code></pre>"},{"location":"deploy-image-similarity/#image-pair-mode","title":"Image pair mode","text":"<p>With two images as input, it returns the cosine similarity of two images. This is applicable to similarity comparison.</p> <ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url_1 String Choose url_1 or img_1. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img_1 String Choose img_1 or url_1. Base64 encoded image data. url_2 String Choose url_2 or img_2. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img_2 String Choose img_2 or url_2. Base64 encoded image data. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n\"url_1\": \"Image URL address\",\n\"url_2\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n\"img_1\": \"Base64\u7f16\u7801\u7684\u56fe\u50cf\u6570\u636e\",\n\"img_2\": \"Base64\u7f16\u7801\u7684\u56fe\u50cf\u6570\u636e\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description similarity Float Cosine similarity of the two images, which is a Float value between 0 and 1. The closer it is to 1, the more similar the two images are. <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"similarity\": 0.95421\n}\n</code></pre>"},{"location":"deploy-image-similarity/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-image-similarity/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-image-similarity/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-image-similarity/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/text_similarity\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/text_similarity' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-image-similarity/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/text_similarity'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-image-similarity/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/text_similarity\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-image-similarity/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/text_similarity\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-image-similarity/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-image-similarity/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 10240MB memory, 1 seconds run each time \u00a51134.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51237.06"},{"location":"deploy-image-similarity/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 4 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 10240MB memory, 1 seconds run each time $166.7 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $176.35"},{"location":"deploy-image-similarity/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Image Similarity feature via Amazon CloudFormation as described in Add or remove AI features and make sure the Image Similarity parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 10 Minutes</p>"},{"location":"deploy-image-super-resolution/","title":"Image Super Resolution","text":"<p>Upscale the resolution and enhance details in the images.</p>"},{"location":"deploy-image-super-resolution/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to converting original image assets into high resolution images.</p>"},{"location":"deploy-image-super-resolution/#requirements-for-aws-service-quotas","title":"Requirements for AWS service quotas","text":"<ul> <li>This API needs to create a GPU instance based on Amazon SageMaker. If the corresponding instance limit in your AWS account is insufficient, the API feature will be deployed abnormally. You can click Support Center on the toolbar at the top of the AWS Management Console to create a support ticket to request an increase in the instance limit of the Amazon SageMaker service. For more information, see AWS service quotas.</li> <li>The default AWS Lambda memory is about 4GB (4096 MB). If the AWS Lambda function limit in your AWS account is lower than 4096 MB, the API feature will be deployed abnormally. You can click Support Center on the toolbar at the top of the AWS Management Console to create a support ticket and request to increase the memory limit of the AWS Lambda service. For more information, see AWS service quotas.</li> </ul>"},{"location":"deploy-image-super-resolution/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp. Image size should not exceed 1920 * 1080. With portrait enhancement enabled, it is recommended that the image size should not exceed 1280 * 720. Due to performance limitations, the recommended image size does not exceed 400 * 400 for architecture based on AWS Lambda. img String Choose url or img. Base64-encoded image data scale Integer no Upscale size. 2 (default) or 4 is supported face Bool no By default, it is False. When set to True, face enhancement is enabled. Only GPU deployment is supported. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n\"url\": \"Image URL address\",\n\"scale\" : 2\n}\n</code></pre> <pre><code>{\n\"img\": \"Base64-encoded image data\",\n\"scale\" : 4\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description result String Base64-encoded image data after scaling <ul> <li>Example JSON response</li> </ul> <pre><code>{\n  \"result\": \"Base64-encoded image data after scaling\"\n}\n</code></pre>"},{"location":"deploy-image-super-resolution/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-image-super-resolution/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-image-super-resolution/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-image-super-resolution/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/image_super_resolution\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/image_super_resolution' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-image-super-resolution/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/image_super_resolution'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-image-super-resolution/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/image_super_resolution\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-image-super-resolution/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/image_super_resolution\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-image-super-resolution/#cost-estimation","title":"Cost Estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> <li>Amazon SageMaker endpoint instance type</li> <li>Amazon SageMaker endpoint data input</li> <li>Amazon SageMaker endpoint data output</li> </ul>"},{"location":"deploy-image-super-resolution/#example","title":"Example","text":"<p>In US East (Ohio) Region (us-east-2), process one million images, with an average processing time of 1 second for one image. Amazon SageMaker endpoint instance will be charged as long as it is started.</p> <p>The cost of using this solution is shown below:</p> Service Dimensions Cost Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 4MB data output each time, $0.09/GB $360 Amazon CloudWatch Logs 10KB each time, $0.50/GB $0.05 Amazon Elastic Container Registry 0.5GB storage, $0.1/GB per month $0.05 Amazon SageMaker Endpoint instance runs for 278 hours, ml.g4dn.xlarge $0.736/hour $204.61 Amazon SageMaker Endpoint instance data input is 1MB each time, $0.016/GB $16 Amazon SageMaker Endpoint instance data output is 4MB each time, $0.016/GB $64 Total $648.21"},{"location":"deploy-image-super-resolution/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Image Super Resolution feature via Amazon CloudFormation as described in Add or remove AI features and make sure the ImageSuperResolution parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 20 Minutes</p>"},{"location":"deploy-layout-analysis/","title":"Document Layout Analysis","text":"<p>Convert document images to a Markdown/JSON format output, with table format in Markdown/HTML.</p>"},{"location":"deploy-layout-analysis/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to a variety of scenarios such as paper documents changed to electronic format, document identification, and content review to improve information processing efficiency.</p>"},{"location":"deploy-layout-analysis/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. output_type String <code>json</code> or <code>markdown</code>, Whether the result is returned in json or converted to markdown. table_type String <code>html</code> or <code>markdown</code>, Whether the table in the result is returned in html or converted to markdown. <ul> <li>Example Request</li> </ul> <p>Example 1</p> <pre><code>{\n  \"url\": \"Image URL address\",\n  \"output_type\": \"json\"\n}\n</code></pre> <pre><code>{\n  \"img\": \"Base64-encoded image data\",\n  \"output_type\": \"json\"\n}\n</code></pre> <p>Example 2</p> <pre><code>{\n  \"url\": \"Image URL address\",\n  \"output_type\": \"markdown\"\n}\n</code></pre> <pre><code>{\n  \"img\": \"Base64-encoded image data\",\n  \"output_type\": \"markdown\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> <p>When <code>output_type</code> is <code>json</code>, a list is returned, and an item in the list is a block in a document.</p> Name Type Description BlockType String These elements correspond to the different portions of the layout, and are: text, title, figure or table Geometry Dict location information about the location of detected items on a document page. Text String The text content of the current block. When BlockType is <code>table</code>, the html or markdown of the table will be returned depending on the <code>table_type</code>. <p>When <code>output_type</code> is <code>markdown</code>, a dict is returned.</p> Name Type Description markdown String Converted images to markdown result. <ul> <li>Example JSON response</li> </ul> <p>Example 1 <code>output_type</code> is <code>json</code> response</p> <pre><code>[\n  {\n    \"BlockType\": \"text\",\n    \"Geometry\": {\n      \"BoundingBox\": {\n        \"Width\": 972,\n        \"Height\": 79,\n        \"Left\": 561,\n        \"Top\": 564\n      }\n    },\n    \"Text\": \"\u6838\u51c6\u65e5\u671f\uff1axxx\u5e74xx\u6708xx\u65e5\"\n  },\n  {\n    \"BlockType\": \"text\",\n    \"Geometry\": {\n      \"BoundingBox\": {\n        \"Width\": 1543,\n        \"Height\": 80,\n        \"Left\": 569,\n        \"Top\": 678\n      }\n    },\n    \"Text\": \"\u4fee\u6539\u65e5\u671f\uff1axxx\u5e74xx\u6708xx\u65e5\"\n  }\n    ...\n]\n</code></pre> <p>Example 2 <code>output_type</code> is <code>markdown</code> response</p> <pre><code>{\n  \"Markdown\": \"\u6838\u51c6\u65e5\u671f\uff1axxx\u5e74xx\u6708xx\u65e5 \\n\\n\u4fee\u6539\u65e5\u671f\uff1axxx\u5e74xx\u6708xx\u65e5....\"\n}\n</code></pre>"},{"location":"deploy-layout-analysis/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-layout-analysis/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-layout-analysis/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-layout-analysis/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/layout_analysis\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/layout_analysis' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-layout-analysis/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/layout_analysis'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-layout-analysis/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/layout_analysis\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-layout-analysis/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/layout_analysis\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-layout-analysis/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-layout-analysis/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-layout-analysis/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-layout-analysis/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Document Layout Analysis feature via Amazon CloudFormation as described in Add or remove AI features and make sure the DocumentLayoutAnalysis parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 15 Minutes</p>"},{"location":"deploy-object-recognition/","title":"Object Recognition","text":"<p>Recognize objects in the image and return the region information and confidence score for each object. 300 types of objects are supported.</p>"},{"location":"deploy-object-recognition/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to IPC image detection, target detection and tracking in image scenes for traffic, security and other industries.</p>"},{"location":"deploy-object-recognition/#list-of-supported-object-recognition","title":"List of supported object recognition","text":"<p>The following is a list of supported entities for target detection.</p> ID accordion airplane alligator apple army_tank awning backpack ball balloon banana barrel baseball baseball_bat baseball_glove basket bathtub bear bed bee beer_bottle bell_pepper belt bench bicycle billboard bird blackboard boat book bookcase boot bottle bowl bowling_ball box bracelet brassiere bread broccoli building bus_(vehicle) butterfly cabinet cake camel camera can candle candy_bar cannon canoe car_(automobile) carrot cart castle cat caterpillar cello cellular_telephone chair chicken_(animal) chopping_board chopstick christmas_tree clock coat cocktail coffee_table coin computer_keyboard computer_monitor cone cookie cow cowboy_hat crab_(animal) crown cucumber cup cupboard curtain deer desk dessert dinosaur dog doll dolphin door doorknob doughnut dragonfly drawer dress drum_(musical_instrument) duck duffel_bag eagle earring egg elephant fan faucet fireplace fireplug fish flag flower_arrangement flowerpot football_helmet fork fountain french_fries frisbee frog fruit fruit_juice frying_pan gazelle giraffe glass_(drink_container) glove goat goggles goose grape guitar gun hamburger hamster handbag handle harbor_seal hat headset helicopter helmet high_heels hog horse house icecream insect jacket jaguar jean jellyfish kitchen_table kite knife ladder lamp lantern laptop_computer lavender lemon lettuce license_plate life_jacket lightbulb lighthouse lily lion lizard maple mask microphone microwave_oven minivan mirror monkey motorcycle mouse_(computer_equipment) muffin mug mushroom musical_instrument napkin necklace necktie nightstand onion orange_(fruit) oven owl paddle painting palm_tree parachute parking_meter parrot pasta pastry pen penguin person piano pillow pizza plastic_bag plate polar_bear pool_table porch poster potted_plant pumpkin rabbit refrigerator remote_control ring roller_skate rose salad sandal_(type_of_shoe) sandwich saucer saxophone scarf scissors sculpture sheep shirt shoe short_pants shrimp sink skateboard ski skirt skullcap snake snowboard soccer_ball sock sofa sofa_bed sparrow speaker_(stero_equipment) spectacles spider spoon sportswear squirrel stool stop_sign stove straw_(for_drinking) strawberry street_sign streetlight suit_(clothing) suitcase sunflower sunglasses sunhat surfboard sushi swimming_pool swimsuit table tablet_computer taxi teddy_bear telephone television_set tennis_ball tennis_racket tent tiger toilet toilet_tissue tomato toothbrush towel tower toy traffic_light train_(railroad_vehicle) trash_can tray tree tripod trousers truck trumpet turtle umbrella vase vegetables violin wall_socket watch water_jug whale wheel wheelchair window wineglass zebra"},{"location":"deploy-object-recognition/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n\"url\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n\"img\": \"Base64-encoded image data\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description Labels List List of recognized objects in the image Name String Target category Instances List List of category instances BoundingBox JSON Coordinate value of the instance in the image, including the percentage of top, left, width, height relative to the full screen Confidence Float Instance confidence, which is from 0 to 100 Confidence Int Maximum value of current class instance confidence LabelModelVersion String Current model version number <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"Labels\": [\n        {\n            \"Name\": \"car_(automobile)\", \n            \"Confidence\": 67.87780523300171, \n            \"Instances\": [\n                {\n                    \"BoundingBox\": {\n                        \"Width\": 1.0013043403596384, \n                        \"Height\": 0.9958885181613408, \n                        \"Left\": -0.00021715163893532008, \n                        \"Top\": 0.00033918747441136817\n                    }, \n                    \"Confidence\": 67.87780523300171\n                }\n            ]\n        }, \n        {\n            \"Name\": \"mirror\", \n            \"Confidence\": 59.2678964138031, \n            \"Instances\": [\n                {\n                    \"BoundingBox\": {\n                        \"Width\": 0.14041614532470703, \n                        \"Height\": 0.29166373257057565, \n                        \"Left\": 0.2743588984012604, \n                        \"Top\": 0.2794425819140053\n                    }, \n                    \"Confidence\": 59.2678964138031\n                }\n            ]\n        }, \n        {\n            \"Name\": \"window\", \n            \"Confidence\": 16.396354138851166, \n            \"Instances\": [\n                {\n                    \"BoundingBox\": {\n                        \"Width\": 0.44319993257522583, \n                        \"Height\": 0.6673663154702585, \n                        \"Left\": 0.5509995222091675, \n                        \"Top\": 0.015529238811174562\n                    }, \n                    \"Confidence\": 16.396354138851166\n                }\n            ]\n        }\n    ], \n    \"LabelModelVersion\": \"1.2.0\"\n}\n</code></pre>"},{"location":"deploy-object-recognition/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-object-recognition/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-object-recognition/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-object-recognition/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/object_recognition\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/object_recognition' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-object-recognition/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/object_recognition'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-object-recognition/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/object_recognition\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-object-recognition/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/object_recognition\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-object-recognition/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-object-recognition/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 10240MB memory, 1 seconds run each time \u00a51134.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51237.06"},{"location":"deploy-object-recognition/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 4 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 10240MB memory, 1 seconds run each time $166.7 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $176.35"},{"location":"deploy-object-recognition/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Object Recognition feature via Amazon CloudFormation as described in Add or remove AI features and make sure the ObjectRecognition parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 10 Minutes</p>"},{"location":"deploy-pornography-detection/","title":"Pornography Detection","text":"<p>Detect pornographic image in three dimensions (normal, sexy, porn) and return confidence scores.</p>"},{"location":"deploy-pornography-detection/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to fast processing of pornographic content, thus helping to reduce auditing manpower, effectively reduce the risk of pornography, and improve the efficiency of information processing.</p>"},{"location":"deploy-pornography-detection/#api-reference","title":"API reference","text":"<ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description url String Choose url or img. Image URL address, which supports HTTP/HTTPS and S3 protocols. Supported image formats are jpg/jpeg/png/bmp, with the longest side not exceeding 4096px. img String Choose url or img. Base64 encoded image data. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n\"url\": \"Image URL address\"\n}\n</code></pre> <pre><code>{\n\"img\": \"Base64-encoded image data\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description normal Float Proportion of normal dimensions of the recognized image sexy Float Proportion of sexy dimensions of the recognized image porn Float Proportion of pornographic dimensions of the recognized image <ul> <li>Example JSON response</li> </ul> <pre><code>{ \n\u201cnormal\u201d  : 0.15993066132068634,\n\u201csexy\u201d    : 0.5451669692993164, \n\u201cporn\u201d    : 0.2949024438858032 \n}\n</code></pre>"},{"location":"deploy-pornography-detection/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-pornography-detection/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-pornography-detection/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-pornography-detection/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/pornography-detection\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/pornography-detection' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-pornography-detection/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/pornography-detection'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-pornography-detection/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/pornography-detection\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-pornography-detection/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/pornography-detection\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-pornography-detection/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"deploy-pornography-detection/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-pornography-detection/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-pornography-detection/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Pornography Detection feature via Amazon CloudFormation as described in Add or remove AI features and make sure the PornographyDetection parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 10 Minutes</p>"},{"location":"deploy-text-similarity/","title":"Text Similarity","text":"<p>Compare two Chinese words or sentences and return similarity score.</p>"},{"location":"deploy-text-similarity/#applicable-scenarios","title":"Applicable scenarios","text":"<p>Applicable to search engines, recommendation systems, machine translation, automatic response, named entity recognition, spelling error correction and other scenarios.</p>"},{"location":"deploy-text-similarity/#api-reference","title":"API reference","text":"<p>The API supports two input modes: single text or text pair.</p>"},{"location":"deploy-text-similarity/#single-text-mode","title":"Single text mode","text":"<p>With a single text as input, it returns the feature vectors of the text. You need to maintain a vector retrieval system. This is applicable to search or callback scenarios.</p> <ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description text String Yes Text data <ul> <li>Example JSON request</li> </ul> <pre><code>{\n  \"text\": \"Test\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description result List List with 768 parameters for a 768-dimensional text vector <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"result\": [\n        0.025645000860095024, \n        0.001914000022225082, \n        0.007929000072181225, \n        ...\n    ]\n}\n</code></pre>"},{"location":"deploy-text-similarity/#text-pair-mode","title":"Text pair mode","text":"<p>With text pair as input, it returns the cosine similarity of two texts. This is applicable to similarity comparison.</p> <ul> <li> <p>HTTP request method: <code>POST</code></p> </li> <li> <p>Request body parameters</p> </li> </ul> Name Type Required Description text_1 String Text data. text_2 String Text data. <ul> <li>Example JSON request</li> </ul> <pre><code>{\n  \"text_1\": \"Test1\",\n  \"text_2\": \"Test2\"\n}\n</code></pre> <ul> <li>Response parameters</li> </ul> Name Type Description similarity Float Cosine similarity of the text pair, which is a Float value between 0 and 1. The closer it is to 1, the more similar the text pair is. <ul> <li>Example JSON response</li> </ul> <pre><code>{\n    \"similarity\": 0.95421\n}\n</code></pre>"},{"location":"deploy-text-similarity/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"deploy-text-similarity/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"deploy-text-similarity/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"Image URL address\"\n}\n</code></pre> <p></p>"},{"location":"deploy-text-similarity/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/text_similarity\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"Image URL address\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/text_similarity' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"Image URL address\"\n}'\n</code></pre>"},{"location":"deploy-text-similarity/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/text_similarity'\npayload = {\n    'url': 'Image URL address'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"deploy-text-similarity/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/text_similarity\"\n\npayload = json.dumps({\n  \"url\": \"Image URL address\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"deploy-text-similarity/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"Image URL address\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/text_similarity\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"deploy-text-similarity/#cost-estimation","title":"Cost Estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>AWS Lambda invocations</li> <li>AWS Lambda running time</li> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul>"},{"location":"deploy-text-similarity/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1),  in 1 seconds</p> <p>The cost of using this solution to process the text is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"deploy-text-similarity/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), in 1 seconds</p> <p>The cost of using this solution to process this text is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"deploy-text-similarity/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the Text Similarity feature via Amazon CloudFormation as described in Add or remove AI features and make sure the TextSimilarity parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: 10 Minutes</p>"},{"location":"deployment/","title":"Launch CloudFormation stack","text":"<p>Before you launch the solution, review the architecture, supported regions, and other considerations discussed in this guide. Follow the step-by-step instructions in this section to configure and deploy the solution into your account.</p> <p>Deployment time</p> <ul> <li> <p>Approximately 10 minutes for deploying an AI feature based on the Amazon Lambda architecture</p> </li> <li> <p>Approximately 20 minutes for deploying an AI feature based on the Amazon SageMaker architecture</p> </li> </ul>"},{"location":"deployment/#prerequisite","title":"Prerequisite","text":"<p>If you choose to launch the stack from AWS China Regions, make sure a domain registered by ICP is available. For more information, see ICP Recordal.</p>"},{"location":"deployment/#launch-the-stack","title":"Launch the stack","text":"<ol> <li> <p>Log in to the AWS Management Console and select the link to launch the AWS CloudFormation stack.</p> <ul> <li>Launch the stack in Global Regions</li> <li>Launch the stack in China Regions</li> </ul> </li> <li> <p>The template is launched in the default region after you log in to the console. To launch the solution in a different    AWS Region, use the Region selector in the console navigation bar.</p> </li> <li> <p>On the Create Stack page, verify that the correct template URL is displayed in the Amazon S3 URL text box, and    choose Next.</p> </li> <li> <p>On the Specify stack details page, assign a name to your solution stack. For information about naming character    limitations, refer    to IAM and STS Limits in the AWS    Identity and Access Management User Guide.</p> </li> <li> <p>Under Parameters, modify the General Configuration and select the AI features to be deployed, and choose *    Next*.</p> <ul> <li>You can choose whether to deploy API explorer, and the authentication method of the API gateway.</li> </ul> Parameter Name Default Value Description APIExplorer yes Deploys the API Explorer to visualize and interact with API resources. See API Reference Guide for details. If you choose no, you can only view the API definitions in API explorer, but cannot perform online test. APIGatewayAuthorization NONE The authentication method of the API gateway. The default is NONE, which means no privilege authentication method. You can also choose to use the IAM permission to control access to the API. APIGatewayStageName prod The first path field in the API gateway (URI). For more information, see stageVariable. </li> </ol> <p>You can deploy the feature by selecting yes-lambda or yes-sagemaker. The default value for all feature    parameters is no.</p> Parameter ID Default Description LiteOCR no Deploy General OCR (Simplified Chinese) GeneralOCRTraditional no Deploy General OCR (Traditional Chinese) AdvancedOCR no Deploy Advanced OCR DocumentLayoutAnalysis no Deploy Document Layout Analysis CustomOCR no Deploy Custom OCR CarLicensePlate no Deploy Car License Plate FaceComparison no Deploy Face Comparison FaceDetection no Deploy Face Detection HumanAttributeRecognition no Deploy Human Attribute Recognition HumanImageSegmentation no Deploy Human Image Segmentation ImageSimilarity no Deploy Image Similarity ObjectRecognition no Deploy Object Recognition PornographyDetection no Deploy Pornography Detection ImageSuperResolution no Deploy Image Super Resolution TextSimilarity no Deploy Text Similarity GeneralNLG no Deploy General NLG <ol> <li> <p>On the Configure Stack Options page, choose Next.</p> </li> <li> <p>On the Review page, review and confirm the settings. Check the box acknowledging that the template creates AWS    Identity and Access Management (IAM) resources. Choose Next.</p> </li> <li> <p>Choose Create Stack to deploy the stack.</p> </li> </ol> <p>You can view the status of the stack in the Status column of the AWS CloudFormation console. You should receive a * CREATE_COMPLETE* status when the creation is complete.</p>"},{"location":"deployment/#follow-up-actions","title":"Follow-up actions","text":"<p>After successful deployment, go to the Outputs tab in AWS CloudFormation's console to find the invoke URL based on Amazon API Gateway according to Parameter ID.</p> <p></p> <p>Next, you can perform the following operations:</p> <ul> <li>Check API and test calling API. For more information, see API Reference Guide.</li> <li>Add or remove AI features. For more information, see Update CloudFormation stack.</li> </ul>"},{"location":"faq/","title":"FAQ","text":""},{"location":"faq/#1-how-to-make-icp-recordal-when-deploying-the-solution-in-aws-china-regions","title":"1. How to make ICP recordal when deploying the solution in AWS China Regions?","text":"<p>This solution uses Amazon API Gateway to receive API call requests. If you want to provide API requests that can be accessed without authentication in the AWS China Regions, you need to apply for and ensure that your AWS account has been registered with the Internet Content Provider (ICP), and 80 /443 port can be enabled normally. For more information, refer to ICP Recordal.</p>"},{"location":"faq/#2-how-do-i-change-the-feature-deployment-type-after-deploying-the-solution","title":"2. How do I change the feature deployment type after deploying the solution?","text":"<p>Please visit CloudFormation Console and select the root stack of the deployed solution from the list of stacks, taking care not to select the nested stack (NESTED). Select Update. In the Parameters section, change the appropriate parameter information and select Next. For example, if Custom OCR was <code>no</code>, you can add Custom OCR by changing the setting to <code>yes-lambda</code> or <code>yes-sagemaker</code>; or you can change the existing setting <code>yes-lambda</code> to <code>yes-sagemaker</code>, thus changing the architecture of Custom OCR from Lambda to SageMaker.</p>"},{"location":"faq/#3-when-deploying-the-solution-i-encountered-resource-handler-returned-message-memorysize-value-failed-to-satisfy-constraint-member-must-have-value-less-than-or-equal-to-3008-how-to-resolve-it","title":"3. When deploying the solution, I encountered Resource handler returned message: \"'MemorySize' value failed to satisfy constraint: Member must have value less than or equal to 3008. How to resolve it?","text":"<p>The default AWS Lambda memory is about 4GB (4096 MB). If the AWS Lambda function limit in your AWS account is lower than 4096 MB, the API feature will be deployed abnormally. You can click Support Center on the toolbar at the top of the AWS Management Console to create a support ticket and request to increase the memory limit of the AWS Lambda service. For more information, see AWS service quotas.</p>"},{"location":"faq/#4-what-aws-identity-and-access-management-iam-permissions-are-required-to-deploy-the-solution","title":"4. What AWS Identity and Access Management (IAM) permissions are required to deploy the solution?","text":"<p>The following permissions are required to deploy the solution and invoke the API via API Gateway after deployment. sagemaker: is only applicable to the Image Super Resolution API.</p> Actions apigateway:DELETE apigateway:GET apigateway:PATCH apigateway:POST apigateway:PUT cloudformation:CancelUpdateStack cloudformation:ContinueUpdateRollback cloudformation:CreateChangeSet cloudformation:CreateStack cloudformation:DeleteStack cloudformation:DescribeChangeSet cloudformation:DescribeStackEvents cloudformation:DescribeStackResources cloudformation:DescribeStackStacks cloudformation:GetStackPolicy cloudformation:GetTemplateSummary cloudformation:ListChangeSets cloudformation:ListStackResources cloudformation:ListStacks cloudformation:RollbackStack cloudformation:UpdateStack cloudformation:UpdateStackSet cloudformation:UpdateStackSet ecr:BatchDeleteImage ecr:BatchGetImage ecr:CreateRepository ecr:DeleteRepository ecr:DescribeRepositories ecr:GetDownloadUrlForLayer ecr:GetRepositoryPolicy ecr:InitiateLayerUpload ecr:PutImage ecr:SetRepositoryPolicy iam:AttachRolePolicy iam:CreateRole iam:DeleteRole iam:DeleteRolePolicy iam:DetachRolePolicy iam:GetRole iam:ListRoles iam:PassRole iam:PutRolePolicy lambda:AddPermission lambda:CreateFunction lambda:DeleteFunction lambda:GetFunction lambda:InvokeFunction lambda:RemovePermission lambda:UpdateFunctionConfiguration s3:GetObject sagemaker:CreateEndpoint sagemaker:CreateEndpointConfig sagemaker:CreateModel sagemaker:DeleteEndpoint sagemaker:DeleteEndpointConfig sagemaker:DeleteModel sagemaker:DescribeEndpoint sagemaker:DescribeEndpointConfig sagemaker:DescribeModel sagemaker:InvokeEndpoint sns:ListTopics"},{"location":"faq/#5-how-to-universally-switch-the-way-apis-are-authenticated-for-access-in-amazon-api-gateway","title":"5. How to universally switch the way APIs are authenticated for access in Amazon API Gateway?","text":"<p>With AWS CloudFormation, you can update the stack to change the properties of existing resources in your stack.</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>On the Stack details page, choose Update.</li> <li>Select Use current template, and choose Next.</li> <li>Update the parameter API Gateway Authorization, and choose Next. </li> <li>On the Configure stack options page, choose Next.</li> <li>On the Review page, review and confirm the settings. Check the box acknowledging that the template will create AWS Identity and Access Management (IAM) resources. Choose Next.</li> <li>Choose Update stack to update the stack.</li> </ol>"},{"location":"faq/#6-how-to-individually-switch-the-way-apis-are-authenticated-for-access-in-amazon-api-gateway","title":"6. How to individually switch the way APIs are authenticated for access in Amazon API Gateway?","text":"<p>Follow the steps below:</p> <ol> <li> <p>Access Amazon API Gateway console.</p> </li> <li> <p>Select the most recently created AI Solution Kit API in the API list, and open the API details page. You can sort by Created to facilitate the search.</p> </li> <li>Expand the resource tree, find the OPTIONS node under the path of the resource you need to modify the access rights, and click it to display the method execution configuration page. </li> <li>Click the Method Request link under Method Execution.</li> <li>Choose the Edit button on the right side of the authorization, expand the drop-down list, and select Amazon IAM. </li> <li>Choose the Update button to complete the modification. After the update, the authorization item should be displayed as 'Amazon IAM'. 6.</li> <li>Choose the POST button under OPTIONS in the resource tree, and modify the method of OPTIONS, change the authorization method to Amazon IAM in the method request, and then choose the Update button.</li> <li>Choose the Actions drop-down button on the left side of the method execution, and click on the Deploy API option under API Actions.</li> <li>In the Deploy API dialog box, select prod or a custom name for the deployment phase (do not select [New Phase]), and then click the Deploy button below to complete the deployment.</li> </ol>"},{"location":"faq/#7-how-to-create-and-use-a-usage-plan-with-api-key","title":"7. How to create and use a usage plan with API key?","text":"<p>This solution supports API Usage Plans. After deploying the solution and testing the APIs, you can implement API Gateway Usage Plans and offer them as a customer-facing product/service. You can configure usage plans and API keys to allow customers to access selected APIs at agreed request rates and quotas that meet their business needs and budget constraints.</p> <p>You can set default method level limits for APIs or set limits for individual API methods if desired. The API caller must provide an assigned API key in the x-api-key header of the API request. </p> <p>To configure an API usage plan, refer to Configure Usage Plan.</p>"},{"location":"faq/#8-when-deploying-the-solution-i-encountered-the-account-level-service-limit-mlg4dnxlarge-for-endpoint-usage-is-instances-with-current-utilization-of-instances-and-a-request-delta-of-instances-please-contact-aws-support-to-request-an-increase-for-this-limit-how-do-i-resolve-this","title":"8. When deploying the solution, I encountered The account-level service limit 'ml.g4dn.xlarge for endpoint usage' is * Instances, with current utilization of * Instances and a request delta of * Instances. Please contact AWS support to request an increase for this limit. How do I resolve this?","text":"<p>The SageMaker endpoint type used in the solution is <code>ml.g4dn.xlarge</code>, the service limit (also known as the quotas) is the maximum number of service resources or operations used in your account, you will be prompted with this error message after the number of endpoints exceeds the service limit, the default number of service endpoints of type <code>ml.m4.xlarge</code> supported in most regions is 4, you can follow the Upgrade Service Quota guidelines to increase the limit SageMaker service quota.</p>"},{"location":"include-call-url/","title":"Include call url","text":""},{"location":"include-call-url/#calling-url","title":"Calling URL","text":"<p>You have two options to call URL of AI features: </p> <ul> <li>When deploying the solution, set the parameter APIGatewayAuthorization to <code>NONE</code> to allow anonymous access to API.</li> <li>When deploying the solution, set the parameter  APIGatewayAuthorization to<code>AWS_IAM</code> to use the IAM permission to control access to API. For more information, see Invoking a REST API in Amazon API Gateway.</li> </ul>"},{"location":"include-deploy-code/","title":"Include deploy code","text":""},{"location":"include-deploy-code/#api-test","title":"API test","text":"<p>You can use the following tools (API explorer, Postman, cURL, Python, Java) to test calling APIs.</p>"},{"location":"include-deploy-code/#api-explorer","title":"API Explorer","text":"<p>Prerequisites</p> <p>When deploying the solution, you need to\uff1a</p> <ul> <li>set the parameter API Explorer to <code>yes</code>.</li> <li>set the parameter API Gateway Authorization to <code>NONE</code>.</li> </ul> <p>Otherwise, you can only view the API definitions in the API explorer, but cannot test calling API online. </p> <p>Steps</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li> <p>On the Stacks page, select the solution\u2019s root stack. Do not select the NESTED stack.</p> <p></p> </li> <li> <p>Choose the Outputs tab, and find the URL for APIExplorer.</p> </li> <li> <p>Click the URL to access the API explorer. The APIs that you have selected during deployment will be displayed. </p> <p></p> </li> <li> <p>For the API you want to test, click the down arrow to display the request method.</p> </li> <li>Choose the Try it out button, and enter the correct Body data to test API and check the test result.</li> <li>Make sure the format is correct, and choose Execute.</li> <li>Check the returned result in JSON format in the Responses body. If needed, copy or download the result.</li> <li>Check the Response headers.</li> <li>(Optional) Choose Clear next to the Execute button to clear the request body and responses. </li> </ol>"},{"location":"include-deploy-code/#postman-aws_iam-authentication","title":"Postman (AWS_IAM Authentication\uff09","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the URL with the prefix <code>GeneralOCR</code>.</li> <li> <p>Create a new tab in Postman. Paste the URL into the address bar, and select POST as the HTTP call method.</p> <p></p> </li> <li> <p>Open the Authorization configuration, select Amazon Web Service Signature from the drop-down list, and enter the AccessKey, SecretKey and Amazon Web Service Region of the corresponding account (such as cn-north-1 or cn-northwest-1 ).</p> <p></p> </li> <li> <p>Open the Body configuration item and select the raw and JSON data types. </p> </li> <li>Enter the test data in the Body, and click the Send button to see the corresponding return results.</li> </ol> <pre><code>{\n  \"url\": \"{{ no such element: dict object['sample_image'] }}\"\n}\n</code></pre> <p></p>"},{"location":"include-deploy-code/#curl","title":"cURL","text":"<ul> <li>Windows</li> </ul> <pre><code>curl --location --request POST \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/{{ no such element: dict object['feature_endpoint'] }}\" ^\n--header \"Content-Type: application/json\" ^\n--data-raw \"{\\\"url\\\": \\\"{{ no such element: dict object['sample_image'] }}\\\"}\"\n</code></pre> <ul> <li>Linux/MacOS</li> </ul> <pre><code>curl --location --request POST 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/{{ no such element: dict object['feature_endpoint'] }}' \\\n--header 'Content-Type: application/json' \\\n--data-raw '{\n  \"url\":\"{{ no such element: dict object['sample_image'] }}\"\n}'\n</code></pre>"},{"location":"include-deploy-code/#python-aws_iam-authentication","title":"Python (AWS_IAM Authentication)","text":"<pre><code>import requests\nimport json\nfrom aws_requests_auth.boto_utils import BotoAWSRequestsAuth\n\nauth = BotoAWSRequestsAuth(aws_host='[API_ID].execute-api.[AWS_REGION].amazonaws.com',\n                           aws_region='[AWS_REGION]',\n                           aws_service='execute-api')\n\nurl = 'https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/{{ no such element: dict object['feature_endpoint'] }}'\npayload = {\n    'url': '{{ no such element: dict object['sample_image'] }}'\n}\nresponse = requests.request(\"POST\", url, data=json.dumps(payload), auth=auth)\nprint(json.loads(response.text))\n</code></pre>"},{"location":"include-deploy-code/#python-none-authentication","title":"Python (NONE Authentication)","text":"<pre><code>import requests\nimport json\n\nurl = \"https://[API_ID].execute-api.[AWS_REGION].amazonaws.com/[STAGE]/{{ no such element: dict object['feature_endpoint'] }}\"\n\npayload = json.dumps({\n  \"url\": \"{{ no such element: dict object['sample_image'] }}\"\n})\nheaders = {\n  'Content-Type': 'application/json'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, data=payload)\n\nprint(response.text)\n</code></pre>"},{"location":"include-deploy-code/#java","title":"Java","text":"<pre><code>OkHttpClient client = new OkHttpClient().newBuilder()\n  .build();\nMediaType mediaType = MediaType.parse(\"application/json\");\nRequestBody body = RequestBody.create(mediaType, \"{\\n  \\\"url\\\":\\\"{{ no such element: dict object['sample_image'] }}\\\"\\n}\");\nRequest request = new Request.Builder()\n  .url(\"https://xxxxxxxxxxx.execute-api.xxxxxxxxx.amazonaws.com/[STAGE]/{{ no such element: dict object['feature_endpoint'] }}\")\n  .method(\"POST\", body)\n  .addHeader(\"Content-Type\", \"application/json\")\n  .build();\nResponse response = client.newCall(request).execute();\n</code></pre>"},{"location":"include-deploy-cost-10GB/","title":"include deploy cost 10GB","text":""},{"location":"include-deploy-cost-10GB/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"include-deploy-cost-10GB/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 10240MB memory, 1 seconds run each time \u00a51134.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51237.06"},{"location":"include-deploy-cost-10GB/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 4 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 10240MB memory, 1 seconds run each time $166.7 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $176.35"},{"location":"include-deploy-cost-8GB/","title":"include deploy cost 8GB","text":""},{"location":"include-deploy-cost-8GB/#cost-estimation","title":"Cost estimation","text":"<p>You are responsible for the cost of using each Amazon Web Services service when running the solution. As of this revision, the main cost factors affecting the solution include.</p> <ul> <li>Amazon API Gateway calls</li> <li>Amazon API Gateway data output</li> <li>Amazon CloudWatch Logs storage</li> <li>Amazon Elastic Container Registry storage</li> </ul> <p>If you choose an Amazon Lambda based deployment, the factors also include:</p> <ul> <li>Amazon Lambda invocations</li> <li>Amazon Lambda running time</li> </ul> <p>If you choose an Amazon SageMaker based deployment, the factors also include:</p> <ul> <li>Amazon SageMaker endpoint node instance type</li> <li>Amazon SageMaker endpoint node data input</li> <li>Amazon SageMaker endpoint node data output</li> </ul>"},{"location":"include-deploy-cost-8GB/#cost-estimation-example-1","title":"Cost estimation example 1","text":"<p>In AWS China (Ningxia) Region operated by NWCD (cn-northwest-1), process an image of 1MB in 1 second</p> <p>The cost of using this solution to process the image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations \u00a51.36 AWS Lambda 8192MB memory, 1 seconds run each time \u00a5907.8 Amazon API Gateway 1 million invocations \u00a528.94 Amazon API Gateway 100KB data output each time, \u00a50.933/GB \u00a593.3 Amazon CloudWatch Logs 10KB each time, \u00a56.228/GB \u00a562.28 Amazon Elastic Container Registry 0.5GB storage, \u00a50.69/GB each month \u00a50.35 Total \u00a51010.06"},{"location":"include-deploy-cost-8GB/#cost-estimation-example-2","title":"Cost estimation example 2","text":"<p>In US East (Ohio) Region (us-east-2), process an image of 1MB in 1 seconds</p> <p>The cost of using this solution to process this image is shown below:</p> Service Dimensions Cost AWS Lambda 1 million invocations $0.20 AWS Lambda 8192MB memory, 1 seconds run each time $133.3 Amazon API Gateway 1 million invocations $3.5 Amazon API Gateway 100KB data output each time, $0.09/GB $9 Amazon CloudWatch Logs 10KB each time, $0.50/GB $5 Amazon Elastic Container Registry 0.5GB\u5b58\u50a8\uff0c$0.1/GB each month $0.05 Total $142.95"},{"location":"include-deploy-description/","title":"Include deploy description","text":"<p>{{ no such element: dict object['feature_description'] }}</p>"},{"location":"include-deploy-description/#applicable-scenarios","title":"Applicable scenarios","text":"<p>{{ no such element: dict object['feature_scenario'] }}</p>"},{"location":"include-deploy-uninstall/","title":"Include deploy uninstall","text":""},{"location":"include-deploy-uninstall/#uninstall-the-deployment","title":"Uninstall the deployment","text":"<p>You can uninstall the {{ no such element: dict object['feature_name'] }} feature via Amazon CloudFormation as described in Add or remove AI features and make sure the {{ no such element: dict object['feature_id'] }} parameter is set to no in the parameters section.</p> <p>Note</p> <p>Time to uninstall the deployment is approximately: {{ no such element: dict object['destroy_time'] }}</p>"},{"location":"regions/","title":"Regional Deployment","text":"<p>This solution uses services which may not be currently available in all AWS Regions. Launch this solution in an AWS Region where required services are available. For the most current availability by Region, refer to the AWS Regional Services List.</p>"},{"location":"regions/#supported-regions-for-deployment-in-aws-global-regions","title":"Supported regions for deployment in AWS Global Regions","text":"Region Name Region ID US East (N. Virginia) Region us-east-1 US East (Ohio) Region us-east-2 US West (N. California) Region us-west-1 US West (Oregon) Region us-west-2 Asia Pacific (Mumbai) Region ap-south-1 Asia Pacific (Tokyo) Region ap-northeast-1 Asia Pacific (Seoul) Region ap-northeast-2 Asia Pacific (Singapore) Region ap-southeast-1 Asia Pacific (Sydney) Region ap-southeast-2 Canada (Central) Region ca-central-1 Europe (Ireland) Region eu-west-1 Europe (London) Region eu-west-2 Europe (Paris) Region eu-west-3 Europe (Frankfurt) Region eu-central-1 South America (Sao Paulo) Region sa-east-1"},{"location":"regions/#supported-regions-for-deployment-in-aws-china-regions","title":"Supported regions for deployment in AWS China Regions","text":"Region Name Region ID AWS China (Beijing) Region operated by Sinnet cn-north-1 AWS China (Ningxia) Region operated by NWCD cn-northwest-1"},{"location":"revisions/","title":"Release Notes","text":"Date Description September 2021 Release 1.0.0  Support the following AI features: <ol><li>General OCR</li><li>Image Super Resolution</li><li>Pornography Detection</li><li>Human Image Segmentation</li></ol> June 2022 Release 1.2.0 Updated the following AI features: <ol><li>Optimized General OCR</li><li>General OCR (Traditional Chinese)</li><li>Custom OCR</li><li>Image Similarity</li><li>Object Recognition</li><li>Face Detection</li><li>Face Comparison</li><li>Human Attribute Recognition</li><li>Car License Plate</li><li>Text Similarity</li></ol> Updated the solution architecture: <ol><li>Support OpenAPI specification and integrate API Explorer</li><li>AI model containerization</li><li>Upgrade CDK to 2.27.0</li><li>Support CloudFormation deployment</li></ol> December 2022 Release 1.3.0 AI features update: <ol><li>All features support Amazon SageMaker architecture</li></ol> Updated the solution architecture: <ol><li>Support deployment of Amazon SageMaker-based architecture</li></ol> Auguest 2023 Release 1.4.0 AI features update: <ol> <li>Add multilingual advanced optical character recognition (OCR) model.</li> <li>Add general natural language understanding model.</li> <li>Modify general text recognition to lightweight text recognition.</li> </ol>"},{"location":"security/","title":"Security Information","text":"<p>When you build solutions on Amazon Web Services, security responsibilities are shared between you and Amazon Cloud. This Shared Responsibility Model reduces your operational burden due to the Amazon Web Services operations, management, and control components, including host operations The physical security of the system, the virtualization layer, and the facility where the service runs. For more information on Amazon Web Services, visit Amazon Web Services Cloud Security.</p>"},{"location":"security/#iam-roles","title":"IAM roles","text":"<p>AWS Identity and Access Management (IAM) roles allow customers to assign fine-grained access policies and permissions to services and users on AWS. This solution creates IAM roles that grant access between components of the solution.</p>"},{"location":"source/","title":"Source code","text":"<p>Visit our GitHub repository to download the source code of this solution. The template of the AI Solution Kit is generated by AWS CloudFormation. For more information, refer to the README.md file.</p>"},{"location":"template/","title":"CloudFormation template","text":"<p>Before deploying the solution, you can download the following AWS CloudFormation template used by the solution. For more information, see CloudFormation concepts.</p> <p>AI-Solution-Kit.template: You can use this template to launch the solution and related services. You can also customize the template according to your needs.</p>"},{"location":"uninstall/","title":"Uninstall the solution","text":"<p>To uninstall AI Solution Kit, you must delete the AWS CloudFormation stack. </p> <p>You can use either the AWS Management Console or the AWS Command Line Interface (CLI) to delete the CloudFormation stack.</p>"},{"location":"uninstall/#using-the-aws-management-console","title":"Using the AWS Management Console","text":"<ol> <li>Sign in to the AWS CloudFormation console.</li> <li>Select this solution\u2019s installation stack.</li> <li>Choose Delete.</li> </ol>"},{"location":"uninstall/#using-aws-command-line-interface","title":"Using AWS Command Line Interface","text":"<p>Determine whether the AWS CLI is available in your environment. For installation instructions, see What Is the AWS Command Line Interface in the AWS CLI User Guide. After confirming that the AWS CLI is available, run the following command.</p> <pre><code>$ aws cloudformation delete-stack --stack-name &lt;installation-stack-name&gt;\n</code></pre>"},{"location":"upgrade/","title":"Upgrade the solution","text":""},{"location":"upgrade/#upgrade-scenario-1","title":"Upgrade scenario 1","text":"<p>When you have deployed and are using some of the API features from release 1.0.0, you can continue to use the original APIs that have been deployed in your AWS account while deploying the features provided in the new APIs available in release 1.2.0. </p> <p>The interface definition parameters of the four APIs (General OCR, Image Super Resolution, Human Image Segmentation, Pornography Detection) in the release 1.0.0 are identical to the same four features in release 1.2.0 or above, and you only need to replace the original URLs to use them. </p>"},{"location":"upgrade/#upgrade-scenario-2","title":"Upgrade scenario 2","text":"<p>If you want to switch the original API invoke URL to the new version, you can perform the following operations after deploying the new version:</p> <ol> <li>Sign in to the AWS CloudFormation console.</li> <li>On the Stacks page, select the solution\u2019s root stack.</li> <li>Choose the Outputs tab, and find the invoke URL.</li> <li>Replace the old invoke URL in the code.</li> <li>After the replacement, you can completely remove the original stack in the AWS CloudFormation console to avoid incurring extra cost, which takes about 10 minutes.</li> </ol>"}]}